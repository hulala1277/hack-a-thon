{% extends "base.html" %}

{% block title %}Report Issue | Janasunwai 360{% endblock %}

{% block content %}
<style>
    #submit_container::-webkit-scrollbar {
        width: 6px;
    }
    #submit_container::-webkit-scrollbar-track {
        background: transparent;
    }
    #submit_container::-webkit-scrollbar-thumb {
        background: rgba(29, 78, 216, 0.2);
        border-radius: 10px;
    }

    input, select, textarea {
        transition: all 0.2s ease-in-out;
    }
</style>

<div id="submit_container" 
     class="relative mx-auto bg-white/95 backdrop-blur-md w-full max-w-2xl h-[88vh] overflow-y-auto my-2 p-8 md:p-12 rounded-3xl shadow-2xl border border-white/50 animate-fade-in no-scrollbar">
    
    <div class="text-center mb-10">
        <div class="inline-block p-3 rounded-2xl bg-blue-50 mb-4">
            <span class="material-symbols-outlined text-4xl text-blue-700">campaign</span>
        </div>
        <h1 style="font-family: 'Unica One', sans-serif;" class="text-5xl font-bold text-blue-800 tracking-tighter uppercase">
            File a Report
        </h1>
        <p class="text-[10px] font-black text-emerald-600 uppercase tracking-[0.2em] mt-2 flex items-center justify-center gap-1">
            <span class="material-symbols-outlined text-sm">lock</span> 100% Anonymous Encryption Active
        </p>
    </div>

    <form method="POST" enctype="multipart/form-data" class="space-y-6" id="reportForm">
        
        <div>
            <label class="text-[10px] font-black text-blue-700 uppercase ml-2 mb-1 block tracking-widest">Issue Subject</label>
            <input type="text" name="title" required
                   placeholder="e.g., Broken water pipeline in Ward 4"
                   class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-blue-700 focus:bg-white outline-none">
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="text-[10px] font-black text-blue-700 uppercase ml-2 mb-1 block tracking-widest">District</label>
                <input type="text" name="district" required placeholder="e.g., Kathmandu"
                       class="w-full p-4 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-blue-700 focus:bg-white outline-none">
            </div>
            <div>
                <label class="text-[10px] font-black text-blue-700 uppercase ml-2 mb-1 block tracking-widest">Municipality</label>
                <input type="text" name="municipality" required placeholder="e.g., Lalitpur"
                       class="w-full p-4 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-blue-700 focus:bg-white outline-none">
            </div>
        </div>

        <div>
            <label class="text-[10px] font-black text-blue-700 uppercase ml-2 mb-1 block tracking-widest">Detailed Description</label>
            <textarea name="description" rows="4" required
                      placeholder="Please provide as much detail as possible..."
                      class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl focus:ring-2 focus:ring-blue-700 focus:bg-white outline-none resize-none"></textarea>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label class="text-[10px] font-black text-blue-700 uppercase ml-2 mb-1 block tracking-widest">Urgency Level</label>
                <select name="priority" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-blue-700 outline-none appearance-none cursor-pointer">
                    <option value="low">Low (General Feedback)</option>
                    <option value="medium" selected>Medium (Standard Issue)</option>
                    <option value="high">High (Urgent Attention)</option>
                </select>
            </div>
            <div>
                <label class="text-[10px] font-black text-blue-700 uppercase ml-2 mb-1 block tracking-widest">Evidence (Image/PDF)</label>
                <div class="relative">
                    <input type="file" name="attachments" id="file-upload" class="hidden" accept="image/*,.pdf">
                    <label for="file-upload" class="flex items-center justify-center w-full p-4 bg-blue-50 border-2 border-dashed border-blue-200 rounded-xl cursor-pointer hover:bg-blue-100 transition-colors">
                        <span class="material-symbols-outlined text-blue-600 mr-2">upload_file</span>
                        <span id="file-name" class="text-xs font-bold text-blue-700 uppercase">Attach Media</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="pt-6">
            <button type="submit" id="submitBtn"
                    class="w-full bg-blue-700 text-white py-5 rounded-2xl font-black uppercase tracking-[0.2em] shadow-xl hover:bg-blue-800 hover:-translate-y-1 active:scale-95 transition-all flex items-center justify-center gap-3">
                <span class="material-symbols-outlined">send</span>
                Submit Public Report
            </button>
            <p class="text-center text-[9px] text-gray-400 mt-4 uppercase tracking-widest">
                By submitting, you agree that this information is accurate to the best of your knowledge.
            </p>
        </div>
    </form>
</div>

<script>
    document.getElementById('file-upload').addEventListener('change', function(e) {
        const fileName = e.target.files[0] ? e.target.files[0].name : "Attach Media";
        document.getElementById('file-name').textContent = fileName;
    });

    document.getElementById('reportForm').addEventListener('submit', function() {
        const btn = document.getElementById('submitBtn');
        btn.innerHTML = '<span class="material-symbols-outlined animate-spin">sync</span> PROCESSING...';
        btn.classList.add('opacity-80', 'cursor-not-allowed');
    });
</script>
{% endblock %}